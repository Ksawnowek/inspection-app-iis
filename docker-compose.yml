services:
  api:
    build:
      context: ./backend
      dockerfile: Dockerfile
    env_file: [./backend/.env.docker]
    ports: ["8001:8001"]
    volumes: ["api_storage:/app/storage"]
    command: uvicorn app.main:app --host 0.0.0.0 --port 8001

  web:
    build:
      context: .
      dockerfile: frontend/Dockerfile
    ports: ["8080:80"]
    depends_on: [api]

volumes:
  api_storage: {}
